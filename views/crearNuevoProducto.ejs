<!DOCTYPE html>
<html lang="en">
<head>
    
    <%- include('partials/head') %> 
    <link rel="stylesheet" href="../css/styles-editarproducs.css">
    <title>Blockbuster</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

</head>
<body>
    <%- include('partials/header') %>  

<main>
    
    


    <main class="all-form">
        <!-- register form -->
        <!-- <div class="center"></div> -->

        <h1 class="tituloPag">Subir Nueva Pelicula</h1>

        <form action="/products/guardarNuevoProducto" method="POST"  enctype="multipart/form-data">
            
            <!-- on/off -->
            <div class="switch-holder">
                <div class="switch-label">
                    <span>Activa</span>
                </div>
                <div class="switch-toggle">
                    <input type="checkbox" name="is_active" value="1" id="bluetooth">
                    <label for="bluetooth"></label>
                </div>
            </div>

            <div class="flex-wrap">

            <div class="txt_field">
                <input value="<%= locals.oldData ? oldData.titulo : null %>" type="text" name="titulo" class="titulo">
                <label> Nombre de pelicula:</label>
                <span class="error_titulo" style="color: rgb(255, 149, 0);">
                <% if (locals.errors && errors.titulo) { %>
                    <%= errors.titulo.msg %></p>
                <% } %>
                </span>
                
            </div>

            
            <div class="txt_field">
                <input  value="<%= locals.oldData ? oldData.duracion : null %>"  type="text" name="duracion" class="duracion">
                <label>Duracion</label>
                <span class="error_duracion" style="color: rgb(255, 149, 0);">
                <% if (locals.errors && errors.duracion) { %>
                    <%= errors.duracion.msg %></p>
                <% } %>
                </span>
            </div>
            <div class="txt_field">
                <input  value="<%= locals.oldData ? oldData.release_year : null %>"  type="text" name="release_year" class="release_year">
                <span></span>
                <label>Año</label>
                <span class="error_release_year" style="color: rgb(255, 149, 0);">
                <% if (locals.errors && errors.release_year) { %>
                    <%= errors.release_year.msg %></p>
                <% } %>
                </span>
            </div>
            
            <div class="txt_field">
                <input  value="<%= locals.oldData ? oldData.precio : null %>"  type="text" name="precio" class="precio">
                <label>Precio</label>
                <span class="error_precio" style="color: rgb(255, 149, 0);">
                <% if (locals.errors && errors.precio) { %>
                    <%= errors.precio.msg %></p>
                <% } %>
                </span>
            </div>
            <div class="txt_field">
                <input  value="<%= locals.oldData ? oldData.CalificacionBlockbuster : null %>"  type="text" name="CalificacionBlockbuster" class="CalificacionBlockbuster">
                <span></span>
                <label>Calificacion Blockbuster</label>
                <span class="error_CalificacionBlockbuster" style="color: rgb(255, 149, 0);">
                <% if (locals.errors && errors.CalificacionBlockbuster) { %>
                    <%= errors.CalificacionBlockbuster.msg %></p>
                <% } %>
                </span>
            </div>
            <div class="txt_field">
                <input  value="<%= locals.oldData ? oldData.CalificacionIMDb : null %>"  type="text" name="CalificacionIMDb" class="CalificacionIMDb">
                <span></span>
                <label>Calificacion IMDb</label>
                <span class="error_CalificacionIMDb" style="color: rgb(255, 149, 0);">
                <% if (locals.errors && errors.CalificacionIMDb) { %>
                    <%= errors.CalificacionIMDb.msg %></p>
                <% } %>
                </span>
            </div>
            <div class="txt_field">
                <input  value="<%= locals.oldData ? oldData.CalificacionRottenTomatoes : null %>"  type="text" name="CalificacionRottenTomatoes" class="CalificacionRottenTomatoes">
                <span></span>
                <label>Calificacion Rotten Tomatoes</label>
                <span class="error_CalificacionRottenTomatoes" style="color: rgb(255, 149, 0);">
                <% if (locals.errors && errors.CalificacionRottenTomatoes) { %>
                    <%= errors.CalificacionRottenTomatoes.msg %></p>
                <% } %>
                </span>
            </div>
 
           
           
            <div class="txt_field">
                <input  value="<%= locals.oldData ? oldData.trailer : null %>"  type="text" name="trailer" class="trailer">
                <span></span>
                <label>URL Trailer</label>
                <span class="error_trailer" style="color: rgb(255, 149, 0);">
                <% if (locals.errors && errors.trailer) { %>
                    <%= errors.trailer.msg %></p>
                <% } %>
                </span>
            </div>

            <div class="txt_field">
                <input  value="<%= locals.oldData ? oldData.movieUrl : null %>"  type="text" name="movieUrl" class="movieUrl">
                <span></span>
                <label>URL Pelicula</label>
                <span class="error_movieUrl" style="color: rgb(255, 149, 0);">
                <% if (locals.errors && errors.movieUrl) { %>
                    <%= errors.movieUrl.msg %></p>
                <% } %>
                </span>
            </div>
         </div> <!--fin div flex-wrap -->

         <div class="flex-wrap div-url-con-subir-file">
             <!-- <select name="selectFoto" id="selectFoto">
                <option value="null">IMAGEN (subir foto o usar url)</option>
                <option value="subir-foto">Subir foto</option>
                <option value="ingresar-url">Ingresar Url</option>
            </select> -->
            <!-- <input type="radio" name="radio-foto" id="subir-foto"  class="radio-foto"> -->
            <div class="content-div-image-upload">
                <div class="image-upload"  > <!--style="display: none;" -->
                    <label for="file-input" class="div-subir-foto">
                        <p>Subir Imagen</p>
                        <i class="fa-solid fa-cloud-arrow-up"></i>
                        <img id="imgPreview" width="60px">
                    </label>
                    <input id="file-input" type="file" name="imageMovie" class="imageMovie" />
                    <span class="error_imageMovie" style="color: rgb(255, 149, 0);">
                    <% if (locals.errors && errors.imageMovie) { %>
                        <%= errors.imageMovie.msg %></p>
                    <% } %>
                    </span>
                </div>
            </div> 
<!-- Elegir entre subir o url -->
            <div class="form-check form-switch" id="form-switch"> 
                <input class="form-check-input" type="checkbox"  role="switch" id="flexSwitchCheckDefault" name="switchUrlImg">
                <label class="form-check-label" id="form-check-label" for="flexSwitchCheckDefault">Subir Imagen</label>
              </div>

            <!-- <input type="radio" name="radio-foto" id="url-foto" class="radio-foto"> -->
            <div id="divUrlImagen" class="txt_field" >
                <input disabled value="<%= locals.oldData ? oldData.imagen : null %>"  type="text" name="imagen" class="urlImage">
                <span></span>
                <label> ó usar URL de imagen</label>
                <span class="error_urlImage" style="color: rgb(255, 149, 0);">
                <% if (locals.errors && errors.imagen) { %>
                    <%= errors.imagen.msg %></p>
                <% } %>
                </span>
            </div>
        </div> <!--fin div flex-wrap -->
         


         <div class="flex-wrap">
            <article>
                <div class="text-area">
                    <h5>Descripcion</h5>
                    <textarea name="descripcion" class="descripcion" cols="40" rows="5" placeholder="En los caminos hacia el bosque..."><%= locals.oldData ? oldData.descripcion : null %></textarea>
                </div>
                <span class="error_descripcion" style="color: rgb(255, 149, 0);">
                <% if (locals.errors && errors.descripcion) { %>
                    <%= errors.descripcion.msg %></p>
                <% } %>
                </span>
            </article>

        <div class="lista-check">
            <h5>Generos</h5>
            <% Genres.forEach(element => { %>
                <div>
                    <input type="checkbox" name="genres" id="<%= element.id %>" value="<%= element.id %>">
             <label for="<%= element.id %>"><%= element.genre %> </label>
            </div>
            <% }) %>
        </div>
        <div class="lista-check">
            <h5>Idiomas</h5>
            <% Languages.forEach(element => { %>
                <div>
                    <input type="checkbox" name="languages" id="<%= element.language %>" value="<%= element.id %>">
             <label for="<%= element.language %>"><%= element.language %> </label>
            </div>
            <% }) %>
        </div>

        
        </div> <!--fin div flex-wrap -->
            
            <input class="pass" type="submit" value="Subir Pelicula" >
            

            <div class="signup_link">
                <a href="/products/administrarProductos">Administrar peliculas</a>
            </div>


        </form>





</main>




    <%- include('partials/footer') %> 
<script src="/js/validateCrudMovie.js" type="text/javascript"></script>
</body>
</html>